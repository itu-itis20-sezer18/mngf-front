<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> 

   <title>Yatırıma Başla - Miningfy</title>
   <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
   <link rel="stylesheet" href="./assets/css/all.min.css">
   <link rel="stylesheet" href="./assets/css/animate.css">
   <link rel="stylesheet" href="./assets/css/odometer.css">
   <link rel="stylesheet" href="./assets/css/nice-select.css">
   <link rel="stylesheet" href="./assets/css/owl.min.css">
   <link rel="stylesheet" href="./assets/css/jquery-ui.min.css">
   <link rel="stylesheet" href="./assets/css/magnific-popup.css">
   <link rel="stylesheet" href="./assets/css/flaticon.css">
   <link rel="stylesheet" href="./assets/css/main.css">
   
   <link rel="shortcut icon" href="assets/images/favicon.png" type="image/x-icon">
</head>

<body>
   <div class="main--body">
      <!--========== Preloader ==========-->
      <div class="loader">
         <div class="loader-inner">
            <div class="loader-line-wrap">
               <div class="loader-line"></div>
            </div>
            <div class="loader-line-wrap">
               <div class="loader-line"></div>
            </div>
            <div class="loader-line-wrap">
               <div class="loader-line"></div>
            </div>
            <div class="loader-line-wrap">
               <div class="loader-line"></div>
            </div>
            <div class="loader-line-wrap">
               <div class="loader-line"></div>
            </div>
         </div>
      </div>
      <a href="#0" class="scrollToTop"><i class="fas fa-angle-up"></i></a>
      <div class="overlay"></div>
      <header class="header-section ">
         <!-- <div class="header-top no-user">
             <div class="container">
                 <div class="row align-items-center">
                     <div class="col-6">

                     </div>
                     <div class="col-6">
                         <ul class="cart-area ">

                             <li>
                                 <a href="sign-in">Sign In</a>
                             </li>
                             <li>
                                 <a href="sign-up">Sign Up</a>
                             </li>
                         </ul>

                     </div>
                 </div>
             </div>
         </div> -->
         <div class="header-top user" style="border-bottom: 1px solid rgba(255, 255, 255, 0.2);">
            <div class="container d-flex coin-price-div" style="margin-left: 1%">
               <div class="d-flex">
                  <div class="coin-label">MNGF COIN</div>
                  <div class="coin-label-two">MNGF</div>
                  <div class="coin-price-label" id="coin-price-lb">0.5 $</div>
               </div>
            </div>
             <div class="container mobile-side" >
                 <div class="mobile-header d-flex justify-content-end d-lg-none align-items-center">
                     <div class="author">
                         <i class="fa fa-user" style="color: white;" aria-hidden="true"></i>
                     </div>
                 </div>
                 <div class="mobile-header-content d-lg-flex flex-wrap justify-content-lg-end align-items-center">

                     <div
                         class="dashboard-header-right d-flex flex-wrap justify-content-center justify-content-sm-between justify-content-lg-end align-items-center">
                         <ul class="menu" style="margin-right: 20px;">
                             <li class="menu-item-outer">
                                 <a href="dashboard" class="menu-item"
                                     style="background-color: white;color: #33406a;border-radius: 20px;padding-left:15px;padding-right: 15px;padding-top: 5px;padding-bottom: 5px;">Yatırımlarım</a>
                             </li>
                         </ul>
                         <ul class="dashboard-right-menus">
                             <li>
                                 <a href="#0" class="author">
                                     <div class="thumb">
                                         <i class="fa fa-user" style="color: white;" aria-hidden="true"></i>
                                         <span class="checked">
                                             <i class="flaticon-checked" style="color: white;"></i>
                                         </span>
                                     </div>
                                     <div class="content">
                                         <h6 id="main-user-name-m" class="title">John Doe</h6>
                                         <!-- <span class="country">Indonesia</span> -->
                                     </div>
                                 </a>
                                 <div class="notification-area">
                                     <div class="author-header">
                                         <div class="thumb">
                                             <i class="fa fa-user" aria-hidden="true" style="color: #e73351;font-size: 60px;"></i>
                                         </div>
                                         <h6 id="nav-user-name-m" class="title">John Doe</h6>
                                         <a id="nav-email-m" href="#mailto:johndoe@gmail.com">Johndoe@gmail.com</a>
                                     </div>
                                     <div class="author-body">
                                         <ul>
                                             <li>
                                                 <a href="/profile"><i class="far fa-user"></i>Profile</a>
                                             </li>
                                             <li>
                                                 <a onclick="Logout()"><i class="flaticon-right-arrow"></i>Logout</a>

                                             </li>
                                         </ul>
                                     </div>
                                 </div>
                             </li>
                         </ul>
                     </div>
                 </div>
             </div>
             <div class="container desktop-side" >
                 <div class="mobile-header d-flex justify-content-center d-lg-none align-items-center">
                     <div class="author">
                         <i class="fa fa-user" style="color: white;" aria-hidden="true"></i>
                     </div>
                 </div>
                 <div class="mobile-header-content d-lg-flex flex-wrap justify-content-lg-end align-items-center">

                     <div
                         class="dashboard-header-right d-flex flex-wrap justify-content-center justify-content-sm-between justify-content-lg-end align-items-center">
                         <ul class="menu" style="margin-right: 20px;">
                             <li>
                                 <a href="dashboard"
                                     style="background-color: white;color: #33406a;border-radius: 20px;padding-left:15px;padding-right: 15px;padding-top: 5px;padding-bottom: 5px;">Yatırımlarım</a>
                             </li>
                         </ul>
                         <ul class="dashboard-right-menus">
                             <li>
                                 <a href="#0" class="author">
                                     <div class="thumb">
                                         <i class="fa fa-user" style="color: white;" aria-hidden="true"></i>
                                         <span class="checked">
                                             <i class="flaticon-checked" style="color: white;"></i>
                                         </span>
                                     </div>
                                     <div class="content">
                                         <h6 id="main-user-name" class="title">John Doe</h6>
                                         <!-- <span class="country">Indonesia</span> -->
                                     </div>
                                 </a>
                                 <div class="notification-area">
                                     <div class="author-header">
                                         <div class="thumb">
                                             <i class="fa fa-user" aria-hidden="true" style="color: #e73351;font-size: 60px;"></i>
                                         </div>
                                         <h6 id="nav-user-name" class="title">John Doe</h6>
                                         <a id="nav-email" href="#mailto:johndoe@gmail.com">Johndoe@gmail.com</a>
                                     </div>
                                     <div class="author-body">
                                         <ul>
                                             <li>
                                                 <a href="/profile"><i class="far fa-user"></i>Profile</a>
                                             </li>
                                             <li>
                                                 <a onclick="Logout()"><i class="flaticon-right-arrow"></i>Logout</a>

                                             </li>
                                         </ul>
                                     </div>
                                 </div>
                             </li>
                         </ul>
                     </div>
                 </div>
             </div>
         </div>
         <!-- <div class="header-bottom">
             <div class="container">
                 <div class="header-area">
                     <div class="logo">
                         <a href="index">
                             <img src="./assets/images/logo/logo.png" alt="logo">
                         </a>
                     </div>
                     <ul class="menu">
                         <li>
                             <a href="index">Home</a>
                         </li>
                         <li>
                             <a href="dashboard">Dashboard</a>
                         </li>
                         <li>
                             <a href="about">About</a>
                         </li>
                         <li>
                             <a href="affiliate">Affiliate</a>
                         </li>
                         <li>
                             <a href="investment-plan">Plan</a>
                         </li>
                         <li>
                             <a href="faq">Faqs</a>
                         </li>
                         <li>
                             <a href="contact">Contact</a>
                         </li>
                         <li class="pr-0">
                             <a href="contact" class="custom-button btn-join-us">Join Us</a>
                         </li>
                     </ul>
                     <div class="header-bar d-lg-none">
                         <span></span>
                         <span></span>
                         <span></span>
                     </div>
                 </div>
             </div>
         </div> -->
     </header>
      <!--========== Preloader ==========-->
      <div class="dasboard-body">
         <div class="dashboard-hero">
            <!-- <header class="header-section "> -->
               <!-- <div class="header-top no-user">
                   <div class="container">
                       <div class="row align-items-center">
                           <div class="col-6">
   
                           </div>
                           <div class="col-6">
                               <ul class="cart-area ">
   
                                   <li>
                                       <a href="sign-in">Sign In</a>
                                   </li>
                                   <li>
                                       <a href="sign-up">Sign Up</a>
                                   </li>
                               </ul>
   
                           </div>
                       </div>
                   </div>
               </div> -->
               <!-- <div class="header-bottom">
                   <div class="container">
                       <div class="header-area">
                           <div class="logo">
                               <a href="index">
                                   <img src="./assets/images/logo/logo.png" alt="logo">
                               </a>
                           </div>
                           <ul class="menu">
                               <li>
                                   <a href="index">Home</a>
                               </li>
                               <li>
                                   <a href="dashboard">Dashboard</a>
                               </li>
                               <li>
                                   <a href="about">About</a>
                               </li>
                               <li>
                                   <a href="affiliate">Affiliate</a>
                               </li>
                               <li>
                                   <a href="investment-plan">Plan</a>
                               </li>
                               <li>
                                   <a href="faq">Faqs</a>
                               </li>
                               <li>
                                   <a href="contact">Contact</a>
                               </li>
                               <li class="pr-0">
                                   <a href="contact" class="custom-button btn-join-us">Join Us</a>
                               </li>
                           </ul>
                           <div class="header-bar d-lg-none">
                               <span></span>
                               <span></span>
                               <span></span>
                           </div>
                       </div>
                   </div>
               </div> -->
           <!-- </header> -->
            <!--=======Header-Section Ends Here=======-->
            <!--=======Banner-Section Starts Here=======-->
            <!--=======Banner-Section Ends Here=======-->
            <!--=======Proit-Section Starts Here=======-->
            <section class="profit-section invest padding-top padding-bottom">
               <!-- <div class="container-fluid p-0">
               <div class="profit-bg bg_img" data-background="./assets/images/profit/profit-bg.png">
                   <div class="animation-group">
                       <div class="platform">
                           <img src="./assets/images/profit/platform.png" alt="profit">
                       </div>
                       <div class="light">
                           <img src="./assets/images/profit/light.png" alt="profit">
                       </div>
                       <div class="coin-1 wow fadeOutDown" data-wow-delay="1s">
                           <img src="./assets/images/profit/coin6.png" alt="profit">
                       </div>
                       <div class="coin-2 wow fadeOutDown" data-wow-delay="1s">
                           <img src="./assets/images/profit/coin2.png" alt="profit">
                       </div>
                       <div class="coin-3 wow fadeOutDown" data-wow-delay="1s">
                           <img src="./assets/images/profit/coin3.png" alt="profit">
                       </div>
                       <div class="coin-4 wow fadeOutDown" data-wow-delay="1s">
                           <img src="./assets/images/profit/coin4.png" alt="profit">
                       </div>
                       <div class="coin-5 wow fadeOutDown" data-wow-delay="1s">
                           <img src="./assets/images/profit/coin5.png" alt="profit">
                       </div>
                       <div class="coin-6 wow fadeOutDown" data-wow-delay="1s">
                           <img src="./assets/images/profit/coin1.png" alt="profit">
                       </div>
                   </div>
               </div>
               </div> -->
               <div class="container">
                  <div class="calculate-wrapper tab">
                     <div class="calculate--area">
                        <div class="calculate-area">
                           <div class="calculate-item">
                              <h5 class="title" style="margin-bottom: 20px;text-transform: none;" data-serial="01">
                                 Seçili Plan</h5>
                              <select style="text-align: center;" id="select-plan">
                                 <option value="30-days" style="text-align: left;">%5 Vade - 30 Gün</option>
                                 <option value="60-days" style="text-align: left;">%10 Vade - 60 Gün</option>
                                 <option value="90-days" style="text-align: left;">%20 Vade - 90 Gün</option>
                              </select>
                           </div>
                           <div class="calculate-item" style="width: fit-content;">
                              <h5 class="title" data-serial="02" style="margin-bottom: 20px;text-transform: none;">Coin
                                 Seçiniz</h5>
                              <ul class="tab-menu">
                                 <li onclick="selectedCoin('BTC')" class="active">btc</li>
                                 <li onclick="selectedCoin('USDT')"
                                    style="min-width: 60px;width: fit-content;padding-left: 5px;padding-right: 5px;">
                                    Tether(USDT)</li>
                                 <li onclick="selectedCoin('ETH')">eth</li>
                                 <li onclick="selectedCoin('LTC')">ltc</li>
                              </ul>
                           </div>
                           <div class="calculate-item" style="width: fit-content">
                              <h5 class="title" style="margin-bottom: 20px;text-transform: none;">Toplam Bakiyeniz</h5>
                              <input type="text" class="form-control fw-bold amount text-warning" name="amount"
                                 value="0" id="coin-balance" readonly>
                           </div>
                        </div>
                        <div class="calculate-area" style="display: flex;flex-direction: row;">
                           <div class="calculate-item">
                              <h5 class="title" data-serial="03" style="margin-bottom: 20px;text-transform: none;">
                                 Yatıracağınız miktar</h5>
                              <div style="display: flex;width: 70%;">
                                 <input type="text" class="form-control fw-bold amount text-warning"
                                    style="border-top-right-radius: 0;border-bottom-right-radius: 0;width: 200px;"
                                    name="amount" id="coin-amount"
                                    oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');">
                                 <span class="input-group-text"
                                    style="border-top-left-radius: 0;border-bottom-left-radius: 0;">
                                    <a onclick="maxCoinValue()" class="text-dark fw-bold maximumCoin"
                                       style="cursor: pointer;">MAX</a>
                                 </span>
                              </div>
                           </div>
                           <div class="calculate-item" style="width: fit-content;">
                              <h5 class="title" style="margin-bottom: 20px;">MNGF Coin Karşılığı</h5>
                              <input type="text" class="form-control fw-bold amount text-warning" name="amount"
                                 value="0" id="mngf-coin-corresponding" readonly>
                           </div>
                           <div class="calculate-item" style="width: fit-content">
                              <h5 class="title" style="margin-bottom: 20px;text-transform: none;">Dolar Karşılığı</h5>
                              <input type="text" class="form-control fw-bold amount text-warning" name="amount"
                                 value="0" id="usd-corresponding" readonly>
                           </div>
                          
                        </div>
                        <div>
                           <div class="tab-item active">
                              <div class="profit-calc">
                                 <div class="item">
                                    <span class="cate">Günlük Kazanç</span>
                                    <h2 class="title cl-theme-1" id="daily-profit"></h2>
                                 </div>
                                 <div class="item">
                                    <span class="cate">Vade teklifimiz</span>
                                    <h2 class="title cl-theme-1" id="vade"></h2>
                                 </div>
                                 <div class="item">
                                    <span class="cate">Toplam Kazanç</span>
                                    <h2 class="title cl-theme" id="total-profit"></h2>
                                 </div>
                              </div>
                              <div style="margin-top: 10px;display: flex;justify-content: center;">
                                 <button type="button" class="btn btn-primary btn-sm fw-bold btn-block" style="border-radius: 0.25em;background: -webkit-linear-gradient(-103deg, #ef774c 0%, #ed684f 35%, #e84351 76%, #e73351 100%);width: 60%;
                                 border-color: #f55c25;" onclick="preInvRequest()">Yatırıma Başlayın</button>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </section>
            <!--=======Offer-Section Ends Here=======-->
            <!--=======Proit-Section Ends Here=======-->
                  <!--=======Feature-Section Starts Here=======-->
       
     <!--=======Feature-Section Ends Here=======-->

             <!-- ==========Footer-Section Starts Here========== -->
      
             <!-- ==========Footer-Section Ends Here========== -->
         </div>
         <script src="./assets/js/lib/jquery-3.3.1.min.js"></script>
         <script src="./assets/js/lib/modernizr-3.6.0.min.js"></script>
         <script src="./assets/js/lib/plugins.js"></script>
         <script src="./assets/js/lib/bootstrap.min.js"></script>
         <script src="./assets/js/lib/magnific-popup.min.js"></script>
         <script src="./assets/js/lib/jquery-ui.min.js"></script>
         <script src="./assets/js/lib/wow.min.js"></script>
         <script src="./assets/js/lib/odometer.min.js"></script>
         <script src="./assets/js/lib/viewport.jquery.js"></script>
         <script src="./assets/js/lib/nice-select.js"></script>
         <script src="./assets/js/lib/owl.min.js"></script>
         <script src="./assets/js/lib/paroller.js"></script>
         <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

         <script src="./assets/js/lib/lib_main.js"></script>
         <script type="module" src="./assets/js/main.js"></script>
         <script type="module" src="./assets/js/auth/sign.js"></script>
         <script type="module" src="./assets/js/user/user.js"></script>

         <script>
            fetch(`http://api.miningfy.net/coin/getPrice`)
                          .then(datatwo => {
                             return datatwo.json();
                          })
                          .then(data => {
                             console.log("data three: ",data)
                             document.getElementById("coin-price-lb").innerHTML = (data[0].coinPrice) + " $"
                          })
        </script>

         <script>
            var myUser = JSON.parse(localStorage.getItem("myUser"));
            let token = localStorage.getItem("token")
            var multiplier;
            var days;
            var finalAmount;
            var source = document.getElementById("coin-amount");
            var selectOption = document.getElementById("select-plan");
            source.addEventListener('input', coinAmountChange);
            document.querySelector('#select-plan').addEventListener('change', planChange);

            function Logout() {
    window.localStorage.removeItem("myUser");
    window.location.href = "";
  }
            function preInvRequest(){
               fetch(`http://api.miningfy.net/coin/getPrice`)
                     .then(datatwo => {
                        return datatwo.json();
                     })
                     .then(datathree => {
                        console.log("data three: ",datathree)
                        sendInvestmentRequest(datathree[0].coinPrice)
                     })
            }
            function sendInvestmentRequest(mngfPrice) {
               var investment = document.getElementById("coin-amount").value
               var coinBalance;
               switch (selectedGlobalCoin) {
                  case 'BTC':
                     coinBalance = myUser.balances.BTC
                     break
                  case 'USDT':
                     coinBalance = myUser.balances.USDT
                     break
                  case 'ETH':
                     coinBalance = myUser.balances.ETH
                     break
                  case 'LTC':
                     coinBalance = myUser.balances.LTC
                     break
               }
               if (document.getElementById("coin-amount").value == "") {
                  Swal.fire({
                     icon: "error",
                     title: "Hata",
                     text: "Lütfen yatırmak istediğiniz miktarı giriniz!",
                  })
                  return;
               }


               if (coinBalance < investment) {
                  Swal.fire({
                     icon: "error",
                     title: "Hata",
                     text: "Yatırmak istediğiniz miktar mevcut bakiyenizden büyük olamaz!",
                  })
                  return;
               }
               if (selectedGlobalCoin != "USDT") {
                  fetch(`http://api.binance.com/api/v3/ticker/price?symbol=${selectedGlobalCoin}USDT`)
                     .then(data => {
                        return data.json();
                     })
                     .then(data => {

                        var dollarPrice = (document.getElementById("coin-amount").value * data.price)
                        finalAmount = (dollarPrice * multiplier)
                        finalAmount = (dollarPrice + finalAmount).toFixed(2)
                        console.log("NOT USDT", finalAmount)
                        switch (selectedGlobalCoin) {
                           case 'BTC':
                              if (dollarPrice < 100) {
                                 Swal.fire({
                                    icon: "error",
                                    title: "Hata",
                                    text: "Bitcoin ile minimum 100$ yatırım yapabilirsiniz.",
                                 })
                                 return
                              }
                              break;

                           case 'ETH':
                              if (dollarPrice < 50) {
                                 Swal.fire({
                                    icon: "error",
                                    title: "Hata",
                                    text: "Ethereum ile minimum 50$ yatırım yapabilirsiniz",
                                 })
                                 return
                              }
                              break;
                           case 'LTC':
                              if (dollarPrice < 10) {
                                 Swal.fire({
                                    icon: "error",
                                    title: "Hata",
                                    text: "Litecoin ile minimum 10$ yatırım yapabilirsiniz.",
                                 })
                                 return
                              }
                              break;
                        }

                        finalAmount = finalAmount/mngfPrice
                        let dataaa = {
                           userId: myUser._id,
                           selectedCoin: selectedGlobalCoin,
                           amount: investment,
                           methodCurrency: "USD",
                           plan: document.getElementById("select-plan").value,
                           interestRate: multiplier,
                           amountInMngf: document.getElementById("mngf-coin-corresponding").value.split(" ")[0],
                           amountWillBeRecieved: document.getElementById("mngf-coin-corresponding").value.split(" ")[0] * (1+multiplier)
                        }
                        fetch("http://api.miningfy.net/deposit/create", {
                           method: "POST",
                           headers: { "Content-Type": "application/json",
      "Authorization": "Bearer " + token },
                           body: JSON.stringify(dataaa)
                        }).then(response => response.json()).then(dataa => {
                           if(dataa.msg == "unauthorized"){
        localStorage.removeItem("myUser");
        window.location.href = "/sign-in"
      }

                           fetch("http://api.miningfy.net/auth/signInWithId", {
                              method: "POST",   
                              headers: { "Content-Type": "application/json",
      "Authorization": "Bearer " + token },
                              body: JSON.stringify({ userId: myUser._id })
                           }).then(response => response.json())
                              .then(data => {
                                 if(data.msg == "unauthorized"){
        localStorage.removeItem("myUser");
        window.location.href = "/sign-in"
      }
                                 localStorage.setItem("myUser", JSON.stringify(data));
                              });

                           Swal.fire({
                              icon: "success",
                              title: "Yatırımınız oluşturulmuştur..",
                              text: "Yatırımlarım bölümünden kontrol edebilirsiniz.",
                           }).then(function() {
                              window.location.href = "dashboard";
});;
                        });

                     });
               }
               else {
                  finalAmount = document.getElementById("mngf-coin-corresponding").value;
                  if (finalAmount < 10) {
                     Swal.fire({
                        icon: "error",
                        title: "Yatırımınız oluşturulmuştur..",
                        text: "Tether(USDT) ile minimum 10$ yatırım yapabilirsiniz.",
                     })
                     return;
                  }
                  else {
                     finalAmount = finalAmount * (1 + multiplier)
                     let dataaa = {
                        userId: myUser._id,
                        selectedCoin: selectedGlobalCoin,
                        amount: investment,
                        methodCurrency: "USD",
                        plan: document.getElementById("select-plan").value,
                        amountInMngf: document.getElementById("mngf-coin-corresponding").value.split(" ")[0],
                        amountWillBeRecieved: document.getElementById("mngf-coin-corresponding").value.split(" ")[0] * (1+multiplier)
                     }
                     fetch("http://api.miningfy.net/deposit/create", {
                        method: "POST",
                        headers: { "Content-Type": "application/json",
      "Authorization": "Bearer " + token },
                        body: JSON.stringify(dataaa)
                     }).then(response => response.json()).then(dataa => {
                        if(dataa.msg == "unauthorized"){
        localStorage.removeItem("myUser");
        window.location.href = "/sign-in"
      }
                        fetch("http://api.miningfy.net/auth/signInWithId", {
                           method: "POST",
                           headers: { "Content-Type": "application/json",
      "Authorization": "Bearer " + token },
                           body: JSON.stringify({ userId: myUser._id })
                        }).then(response => response.json())
                           .then(data => {
                              if(data.msg == "unauthorized"){
        localStorage.removeItem("myUser");
        window.location.href = "/sign-in"
      }
                              localStorage.setItem("myUser", JSON.stringify(data));
                           });
                        Swal.fire({
                           icon: "success",
                           title: "Yatırımınız oluşturulmuştur..",
                           text: "Yatırımlarım bölümünden kontrol edebilirsiniz.",
                        }).then(function() {
                               window.location.href = "dashboard";
});;
                     });



                  }
               }
            }


            function planChange() {
               document.getElementById("coin-amount").value = ""
               document.getElementById("mngf-coin-corresponding").value = ""
               document.getElementById("usd-corresponding").value = ""
               var plan = document.getElementById("select-plan").value
               console.log("Plan: " + plan)
               switch (plan) {
                  case '30-days':
                     document.getElementById('select-plan').value = "30-days"
                     multiplier = 0.05;
                     days = 30
                     break
                  case '60-days':
                     document.getElementById('select-plan').value = "60-days"
                     multiplier = 0.10;
                     days = 60

                     break
                  case '90-days':
                     document.getElementById('select-plan').value = "90-days"
                     multiplier = 0.20;
                     days = 90
                     break
               }
            }
            function coinAmountChange() {
               if (selectedGlobalCoin != "USDT") {
                  fetch(`http://api.binance.com/api/v3/ticker/price?symbol=${selectedGlobalCoin}USDT`)
                     .then(data => {
                        return data.json();
                     })
                     .then(data => {

                        var dollarPrice = (document.getElementById("coin-amount").value * data.price).toFixed(2)
                        document.getElementById("usd-corresponding").value = dollarPrice + " $"
                        console.log(dollarPrice)
                        finalAmount = (dollarPrice * multiplier).toFixed(2)
                        fetch(`http://api.miningfy.net/coin/getPrice`)
                     .then(datatwo => {
                        return datatwo.json();
                     })
                     .then(datathree => {
                        console.log("MNGF: ", datathree)
                        mngfAmount = dollarPrice/(datathree[0].coinPrice);
                        var plan = document.getElementById("select-plan").value;
                        switch (plan) {
                  case '30-days':
                     document.getElementById('select-plan').value = "30-days"
                     if(dollarPrice < 1000){
                        multiplier = 0.05;
                     }
                     else if (dollarPrice >= 1000 && dollarPrice <5000){
                        multiplier = 0.06;
                     }
                     else if (dollarPrice >= 5000){
                        multiplier = 0.07;
                     }
                     document.getElementById("vade").innerHTML = "%" + (multiplier * 100).toFixed(0);
                     days = 30
                     break
                  case '60-days':
                     document.getElementById('select-plan').value = "60-days"
                     if(dollarPrice < 2000){
                        multiplier = 0.11;
                     }
                     else if (dollarPrice >= 2000 && dollarPrice <10000){
                        multiplier = 0.13;
                     }
                     else if (dollarPrice >= 10000){
                        multiplier = 0.15;
                     }
                    
                     document.getElementById("vade").innerHTML = "%" + (multiplier * 100).toFixed(0);                     days = 60
                     days = 60
                     break
                  case '90-days':
                     document.getElementById('select-plan').value = "90-days"
                     if(dollarPrice < 5000){
                        multiplier = 0.18;
                     }
                     else if (dollarPrice >= 5000 && dollarPrice <20000){
                        multiplier = 0.20;
                     }
                     else if (dollarPrice >= 20000){
                        multiplier = 0.23;
                     }
                    
                     document.getElementById("vade").innerHTML = "%" + (multiplier * 100).toFixed(0);                     days = 60
                     days = 90;
                     break
               }
                        document.getElementById("mngf-coin-corresponding").value = mngfAmount.toFixed(2) + " MNGF"
                        document.getElementById("daily-profit").innerHTML = ((mngfAmount*multiplier) / days).toFixed(2) + " MNGF"
                        document.getElementById("total-profit").innerHTML = ((mngfAmount*multiplier)).toFixed(2) + " MNGF"

                     });

                     });
               }
               else {
                  document.getElementById("usd-corresponding").value = document.getElementById("coin-amount").value + " $"
                  var dollarPrice = document.getElementById("coin-amount").value
                  fetch(`http://api.miningfy.net/coin/getPrice`)
                     .then(datatwo => {
                        return datatwo.json();
                     })
                     .then(datathree => {
                        console.log("MNGF: ", datathree)
                        mngfAmount = dollarPrice/(datathree[0].coinPrice);
                        var plan = document.getElementById("select-plan").value;
                        switch (plan) {
                  case '30-days':
                     document.getElementById('select-plan').value = "30-days"
                     if(dollarPrice < 1000){
                        multiplier = 0.05;
                     }
                     else if (dollarPrice >= 1000 && dollarPrice <5000){
                        multiplier = 0.06;
                     }
                     else if (dollarPrice >= 5000){
                        multiplier = 0.07;
                     }
                     document.getElementById("vade").innerHTML = "%" + (multiplier * 100).toFixed(0);
                     days = 30
                     break
                  case '60-days':
                     document.getElementById('select-plan').value = "60-days"
                     if(dollarPrice < 2000){
                        multiplier = 0.11;
                     }
                     else if (dollarPrice >= 2000 && dollarPrice <10000){
                        multiplier = 0.13;
                     }
                     else if (dollarPrice >= 10000){
                        multiplier = 0.15;
                     }
                    
                     document.getElementById("vade").innerHTML = "%" + (multiplier * 100).toFixed(0);                     days = 60
                     days = 60
                     break
                  case '90-days':
                     document.getElementById('select-plan').value = "90-days"
                     if(dollarPrice < 5000){
                        multiplier = 0.18;
                     }
                     else if (dollarPrice >= 5000 && dollarPrice <20000){
                        multiplier = 0.20;
                     }
                     else if (dollarPrice >= 20000){
                        multiplier = 0.23;
                     }
                    
                     document.getElementById("vade").innerHTML = "%" + (multiplier * 100).toFixed(0);                     days = 60
                     days = 90;
                     break
               }
                        document.getElementById("mngf-coin-corresponding").value = mngfAmount.toFixed(2) + " MNGF"
                        document.getElementById("daily-profit").innerHTML = ((mngfAmount*multiplier) / days).toFixed(2) + " MNGF"
                        document.getElementById("total-profit").innerHTML = ((mngfAmount*multiplier)).toFixed(2) + " MNGF"

                     });
                  finalAmount = dollarPrice
                 

               }
               //Set Balances

            }
            var selectedGlobalCoin;
            if (myUser) {
               fetch("http://api.miningfy.net/auth/signInWithId", {
                  method: "POST",
                  headers: { "Content-Type": "application/json",
      "Authorization": "Bearer " + token },
                  body: JSON.stringify({ userId: myUser._id })
               }).then(response => response.json())
                  .then(data => {
                     if(data.msg == "unauthorized"){
        localStorage.removeItem("myUser");
        window.location.href = "/sign-in"
      }
                     myUser = data;
                     selectedCoin('BTC');
                     localStorage.setItem("myUser", JSON.stringify(data));
                     //Set Balances
                     if (data.length == 0) {
                        //   window.location.href="investment-plan"   
                        return;
                     }
                     document.getElementById("main-user-name").innerHTML = myUser.firstName;
            document.getElementById("nav-user-name").innerHTML = myUser.firstName;
            document.getElementById("nav-email").innerHTML = myUser.email;
            document.getElementById("main-user-name-m").innerHTML = myUser.firstName;
                  });
            }
            else {
               window.location.href = "sign-in"
            }

            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const plan = urlParams.get('plan')
            console.log(plan);
            switch (plan) {
               case '30days':
                  document.getElementById('select-plan').value = "30-days"
                  var multiplier = 0.05;
                  days = 30
                  break
               case '60days':
                  document.getElementById('select-plan').value = "60-days"
                  var multiplier = 0.10;
                  days = 60

                  break
               case '90days':
                  document.getElementById('select-plan').value = "90-days"
                  var multiplier = 0.20;
                  days = 90
                  break
            }
            function selectedCoin(coin) {
               selectedGlobalCoin = coin
               document.getElementById("coin-amount").value = ""
               document.getElementById("usd-corresponding").value = ""
               switch (coin) {
                  case 'BTC':
                     document.getElementById("coin-balance").value = myUser.balances.BTC.toFixed(2) + " BTC"
                     break;
                  case 'USDT':
                     document.getElementById("coin-balance").value = myUser.balances.USDT.toFixed(2) + " USDT"

                     break;
                  case 'ETH':
                     document.getElementById("coin-balance").value = myUser.balances.ETH.toFixed(2) + " ETH"


                     break;
                  case 'LTC':
                     document.getElementById("coin-balance").value = myUser.balances.LTC.toFixed(2) + " LTC"

                     break;
                  default:
                  // code block
               }
            }

            function maxCoinValue() {
               switch (selectedGlobalCoin) {
                  case 'BTC':
                     document.getElementById("coin-amount").value = myUser.balances.BTC.toFixed(2)
                     break
                  case 'USDT':
                     document.getElementById("coin-amount").value = myUser.balances.USDT.toFixed(2)
                     break
                  case 'ETH':
                     document.getElementById("coin-amount").value = myUser.balances.ETH.toFixed(2)
                     break
                  case 'LTC':
                     document.getElementById("coin-amount").value = myUser.balances.LTC.toFixed(2)
                     break
               }
               coinAmountChange();
            }

         </script>
</body>

</html>